System.register(["@angular/core"],function(h,a){var d=(this&&this.__decorate)||function(j,n,l,p){var q=arguments.length,m=q<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,l):p,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function"){m=Reflect.decorate(j,n,l,p)}else{for(var k=j.length-1;k>=0;k--){if(o=j[k]){m=(q<3?o(m):q>3?o(n,l,m):o(n,l))||m}}}return q>3&&m&&Object.defineProperty(n,l,m),m};var b=(this&&this.__metadata)||function(l,j){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function"){return Reflect.metadata(l,j)}};var e=a&&a.id;var i,f,g,c;return{setters:[function(j){i=j}],execute:function(){f=(function(){function j(){}return j}());h("LayerConfig",f);g=(function(){function j(){}j.prototype.close=function(){this.layerComponent.close()};j.prototype.showCloseBtn=function(k){this.layerComponent.config.closeAble=k;return this};j.prototype.setTitle=function(k){this.layerComponent.config.title=k;return this};j.prototype.setMessage=function(k){this.layerComponent.config.message=k;return this};j.prototype.setOnClose=function(k){this.layerComponent.onClose=k;return this};j.prototype.setOkText=function(k){this.layerComponent.config.okTxt=k;return this};j.prototype.setCancelText=function(k){this.layerComponent.config.cancelTxt=k;return this};j.prototype.ok=function(k){this.layerComponent.onOk=k;return this};j.prototype.cancel=function(k){this.layerComponent.onCancel=k;return this};return j}());h("NgLayerRef",g);c=(function(){function j(m,k,l){this.compiler=m;this.appRef=k;this.res=l;this.tempCache={}}j.prototype.dialog=function(l){var k="layer_"+new Date().getTime();return this.createComponent_(l,k)};j.prototype.alert=function(k){return this.confirmOralert_(k,false)};j.prototype.confirm=function(k){return this.confirmOralert_(k,true)};j.prototype.tip=function(k){return this.tipOrLoading_(k,true)};j.prototype.loading=function(k){return this.tipOrLoading_(k,false)};j.prototype.tipOrLoading_=function(l,t){if(!l.outSelector){l.outSelector="boingOut"}l=this.default_(l);var u='<div class="iconing_tip_body iconing_type_{{layerType}}">{{config.message}}</div>',o="layer_"+new Date().getTime(),k=document.createElement("div"),s=k.classList,n;s.add("iconing_tip_backdrop");s.add(o);if(!l.align||["center","bottom","top"].indexOf(l.align)<0){l.align="top"}if(l.isModal){s.add("iconing_loading_modal");n=".iconing_loading_modal"}else{n=""}s.add("iconing_align_"+l.align);document.body.appendChild(k);var r=(function(){function w(y,x){this.layerRef=y;this.self=x;this.layerType=t?"tip":"loading";this.config=l;y.layerComponent=this;this.layerRef=y}w.prototype.ngAfterViewInit=function(){var x=this;this.layerEle=this.self.element.nativeElement.querySelector(".iconing_tip_body");if(this.config.inSelector){this.layerEle.classList.add(this.config.inSelector)}if(t){setTimeout(function(){return x.close()},l.tipDuration+this.calCss_())}};w.prototype.close=function(){var y=this;if(this.config.outSelector){var x=this.layerEle.classList;x.remove(this.config.inSelector);x.add(this.config.outSelector);setTimeout(function(){y.thizRef.destroy()},this.calCss_())}else{this.thizRef.destroy()}};w.prototype.calCss_=function(){var B=getComputedStyle(this.layerEle).animationDuration,y=getComputedStyle(this.layerEle).animationDuration,z=parseFloat(B),x=parseFloat(y);if(z){var A=B.replace(z.toString(),"").toLowerCase();z=A=="ms"?z:A=="s"?z*1000:0}if(x){var A=B.replace(x.toString(),"").toLowerCase();x=A=="ms"?x:A=="s"?x*1000:0}return Math.max(z,x)-5};return w}());r=d([i.Component({selector:".iconing_tip_backdrop."+o+".iconing_align_"+l.align+n,template:u,providers:[g]}),b("design:paramtypes",[g,i.ViewContainerRef])],r);var v=(function(){function w(){}return w}());v=d([i.NgModule({declarations:[r]}),b("design:paramtypes",[])],v);var m=this.compiler.compileModuleAndAllComponentsSync(v),q=m.componentFactories[0],p=this.appRef.bootstrap(q);p.instance.thizRef=p;return p.instance.layerRef};j.prototype.confirmOralert_=function(m,r){var o="layer_"+new Date().getTime(),k=document.createElement("div");k.classList.add("iconing_layer_backdrop");k.classList.add(o);document.body.appendChild(k);var s='<div class="iconing_layer_body iconing_alert_body">'+'<div class="iconing_content">{{config.message}}</div>'+'<div class="iconing_alert_btn">CANCELBUTTON'+'<button class="iconing_btn_ok" (click)="ok()">{{config.okText}}</button>'+"</div>"+"</div>";s=r?s.replace("CANCELBUTTON",'<button class="iconing_btn_cancel" (click)="cancel()">{{config.cancelText}}</button>'):s.replace("CANCELBUTTON","");var l=this.createComponentClass_(m,s,o,this,false);var t=(function(){function u(){}return u}());t=d([i.NgModule({declarations:[l]}),b("design:paramtypes",[])],t);var n=this.compiler.compileModuleAndAllComponentsSync(t),q=n.componentFactories[0],p=this.appRef.bootstrap(q);p.instance.thizRef=p;document.body.appendChild(p.location.nativeElement);return p.instance.layerRef};j.prototype.createComponentClass_=function(o,m,l,n,k){o=this.default_(o);var p=(function(){function q(t,s,r){this.layerRef=t;
this.compiler=s;this.self=r;this.layerFactory=n;this.config=o;t.layerComponent=this}q.prototype.ngAfterViewInit=function(){var s=this,r=s.config;if(r.inSelector&&!k){s.layerEle=s.self.element.nativeElement.querySelector(".iconing_layer_body");s.layerEle.classList.add(r.inSelector);s.backdropStyle.background="rgba(95, 95, 95, 0.5)";s.backdropStyle.transition="background "+s.calCss_(s.layerEle)+"ms"}};q.prototype.ngOnInit=function(){var s=this;this.backdropStyle=this.self.element.nativeElement.style;if(k){var r=this.layerFactory.modifySelector_(o.dialogComponent,"iconing_layer_content");r.then(function(z){var B=o.dialogComponent,y=o.declarations;if(y){var u=o.declarations.indexOf(B);if(u>0){y=y.splice(u,1)}y=[B].concat(y)}else{y=[B]}var x=Reflect.getOwnMetadata("annotations",s.layerFactory.res.instance.constructor);x=x.find(function(t){if(t.toString()==="@NgModule"){return t}});var A=(function(){function t(){}return t}());A=d([i.NgModule({imports:x.imports,declarations:y}),b("design:paramtypes",[])],A);var C=s;C.compiler.clearCache();var v=C.compiler.compileModuleAndAllComponentsSync(A).componentFactories[0];var w=i.ReflectiveInjector.fromResolvedProviders([],C.layerView.injector);C.layerView.createComponent(v,null,w,[]);C.layerEle=C.self.element.nativeElement.querySelector(".iconing_layer_body");C.layerEle.style.display="inline-block";C.layerEle.classList.add(C.config.inSelector);C.backdropStyle.background="rgba(95, 95, 95, 0.5)";C.backdropStyle.transition="background "+C.calCss_(C.layerEle)+"ms"})}};q.prototype.close=function(){var u=this;var r=this.config;if(!this.onClose||this.onClose()){if(r.outSelector){var t=this.layerEle.classList;t.remove(r.inSelector);t.add(r.outSelector);var s=this.calCss_(this.layerEle);this.backdropStyle.background="rgba(138, 138, 138, 0.5)";this.backdropStyle.transition="background "+s+"ms";setTimeout(function(){u.thizRef.destroy()},s)}else{this.thizRef.destroy()}}};q.prototype.cancel=function(){if(!this.onCancel||this.onCancel()){this.close()}};q.prototype.onClose=function(){return true};q.prototype.onCancel=function(){return true};q.prototype.onOk=function(){return true};q.prototype.ok=function(){if(!this.onOk||this.onOk()){this.close()}};q.prototype.calCss_=function(w){var v=getComputedStyle(w).animationDuration,s=getComputedStyle(w).animationDuration,t=parseFloat(v),r=parseFloat(s);if(t){var u=v.replace(t.toString(),"").toLowerCase();t=u=="ms"?t:u=="s"?t*1000:0}if(r){var u=v.replace(r.toString(),"").toLowerCase();r=u=="ms"?r:u=="s"?r*1000:0}return Math.max(t,r)};return q}());d([i.ViewChild("iconing_layer_content",{read:i.ViewContainerRef}),b("design:type",i.ViewContainerRef)],p.prototype,"layerView",void 0);p=d([i.Component({selector:".iconing_layer_backdrop."+l,template:m,providers:[g]}),b("design:paramtypes",[g,i.Compiler,i.ViewContainerRef])],p);return p};j.prototype.modifySelector_=function(l,k){var n=this;if(!(Reflect&&Reflect.getOwnMetadata)){throw"reflect-metadata shim is required when using class decorators"}var m=Reflect.getOwnMetadata("annotations",l);m=m.find(function(o){if(o.toString()==="@Component"){return o}});if(!m){throw"component type required a @Component decorator"}m.selector="."+k;if(m.templateUrl){if(!this.tempCache[m.templateUrl]){return new Promise(function(q,p){var o=new XMLHttpRequest();o.onreadystatechange=function(r){if(o.readyState===XMLHttpRequest.DONE){if(o.status===200){n.tempCache[m.templateUrl]=o.responseText;m.template=o.responseText;delete m.templateUrl;q(i.Component(m)(l))}else{console.error("canot load template: "+m.templateUrl);p()}}};o.open("GET",m.templateUrl,true);o.send()})}else{return new Promise(function(p,o){m.template=n.tempCache[m.templateUrl];delete m.templateUrl;p(i.Component(m)(l))})}}else{return new Promise(function(p,o){p(i.Component(m)(l))})}};j.prototype.createComponent_=function(l,n){var r='<div class="iconing_layer_body" style="display:none;">'+'<div class="iconing_layer_header">'+'<div class="iconing_layer_title">{{config.title}}</div>'+"<button (click)=\"close();\" class=\"iconing_layer_close_btn {{config.closeAble?'iconing_layer_close_able':''}}\"></button>"+"</div>"+"<div #iconing_layer_content></div>"+"</div>";var k=this.createComponentClass_(l,r,n,this,true);var s=(function(){function t(){}return t}());s=d([i.NgModule({declarations:[k]}),b("design:paramtypes",[])],s);var m=this.compiler.compileModuleAndAllComponentsSync(s),p=m.componentFactories[0],o=null;if(!parent){o=this.appRef.bootstrap(p);document.body.appendChild(o.location.nativeElement)}else{var q=i.ReflectiveInjector.fromResolvedProviders([],l.parent.injector);o=l.parent.createComponent(p,null,q,[]);o.instance.thizRef=o;document.body.appendChild(o.location.nativeElement)}return o.instance.layerRef};j.prototype.default_=function(k){var o={title:"",align:"center",closeAble:true,cancelText:"cancel",okText:"ok",outSelector:"fadeOutDown",inSelector:"dropDown",parent:null,dialogComponent:null,isModal:false,tipDuration:2500,message:""};var n=Object.keys(o),m;for(var l in n){m=n[l];
if(k[m]==undefined){k[m]=o[m]}}return k};return j}());c=d([i.Injectable(),b("design:paramtypes",[i.Compiler,i.ApplicationRef,i.ComponentFactoryResolver])],c);h("NgLayer",c)}}});